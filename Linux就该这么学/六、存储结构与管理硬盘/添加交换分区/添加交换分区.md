# 添加交换分区
交换（SWAP）分区是一种通过在磁盘中预先划分一定的空间，把内存中暂时不常用的数据临时存放到磁盘中，以便腾出物理内存空间让更活跃的程序使用的技术，其设计目的是解决真实物理内存不足的问题。简单来说，就是让磁盘帮内存分担压力。由于交换分区通过磁盘设备读写数据，速度比物理内存慢，所以只有当真实的物理内存耗尽后才会调用交换分区的资源。

交换分区的创建过程与前文讲到的挂载并使用存储设备的过程非常相似。在对

/dev/sdb 存储设备进行分区操作前，有必要先说明交换分区的划分建议：在生产环境中， 通常建议交换分区的大小一般为真实物理内存的 1.5～2 倍。为了让大家更明显地感受交换分区空间的变化，这里取出一个大小为 5GB 的主分区作为交换分区资源。
```shell
root@linuxprobe:~# fdisk /dev/sdb
Welcome to fdisk (util-linux 2.40.2).
Changes will remain in memory only, until you decide to write them.
Be careful before using the write command.

Command (m for help): n
Partition type
   p   primary (1 primary, 0 extended, 3 free)
   e   extended (container for logical partitions)
Select (default p): p
Partition number (2-4, default 2): 敲击回车即可
First sector (4196352-41943039, default 4196352): 敲击回车即可
Last sector, +/-sectors or +/-size{K,M,G,T,P} (4196352-41943039, default 41943039): +5G

Created a new partition 2 of type 'Linux' and of size 5 GiB.
```
在上面的操作结束后，我们就得到了一个容量为 5GB 的新分区。然后尝试修改磁盘的标识码，这里将其改成 82（Linux swap）以方便以后知道它的作用：
```shell
Command (m for help): t
Partition number (1,2, default 2): 2
Hex code or alias (type L to list all): 82

Changed type of partition 'Linux' to 'Linux swap / Solaris'.

Command (m for help): p
Disk /dev/sdb: 20 GiB, 21474836480 bytes, 41943040 sectors
Disk model: VMware Virtual S
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disklabel type: dos
Disk identifier: 0x186f3f5e

Device     Boot   Start      End  Sectors Size Id Type
/dev/sdb1          2048  4196351  4194304   2G 83 Linux
/dev/sdb2       4196352 14682111 10485760   5G 82 Linux swap / Solaris
```
搞定！输入 w 参数退出分区表编辑工具：
```shell
Command (m for help): w
The partition table has been altered.
Syncing disks.
```
下面来看一下两个与交换分区相关的简单命令。
mkswap 命令用于对新设备进行交换分区格式化，英文全称为 make swap，语法格式为“mkswap 设备名称”。
```shell
root@linuxprobe:~# mkswap /dev/sdb2
Setting up swapspace version 1, size = 5 GiB (5368705024 bytes)
no label, UUID=cd6c8f9d-0af2-4020-96bc-02509c118b5c
```